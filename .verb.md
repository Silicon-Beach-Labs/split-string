<!-- section: Why use this? -->
<details>
  <summary><strong>Why use this?</strong></summary>

<br>

Although it's easy to split on a string:

```js
console.log('a.b.c'.split('.'));
//=> ['a', 'b', 'c']
```

It's more challenging to split a string whilst respecting escaped or quoted characters.

**This is bad**

```js
console.log('a\\.b.c'.split('.'));
//=> ['a\\', 'b', 'c']

console.log('"a.b.c".d'.split('.'));
//=> ['"a', 'b', 'c"', 'd']
```

**This is good**

```js
var split = require('{%= name %}');
console.log(split('a\\.b.c'));
//=> ['a.b', 'c']

console.log(split('"a.b.c".d'));
//=> ['a.b.c', 'd']
```

See the [options](#options) to learn how to choose the separator or retain quotes or escaping.

<br>

</details>


## Usage

```js
var split = require('{%= name %}');

split('a.b.c');
//=> ['a', 'b', 'c']

// respects escaped characters
split('a.b.c\\.d');
//=> ['a', 'b', 'c.d']

// respects double-quoted strings
split('a."b.c.d".e');
//=> ['a', 'b.c.d', 'e']
```

**Brackets**

Also respects brackets [unless disabled](#optionsbrackets):

```js
split('a (b c d) e', ' ');
//=> ['a', '(b c d)', 'e']
```

## Options

### options.brackets

**Type**: `object|boolean` 

**Default**: `undefined`

**Description**

If enabled, split-string will not split inside brackets. The following brackets types are supported when `options.brackets` is `true`,

```js
{
  '<': '>',
  '(': ')',
  '[': ']',
  '{': '}'
}
```

Or, if object of brackets must be passed, each property on the object must be a bracket type, where the property key is the opening delimiter and property value is the closing delimiter.

**Examples**

```js
// no bracket support by default
split('a.{b.c}');
//=> [ 'a', '{b', 'c}' ]

// support all basic bracket types: "<>{}[]()"
split('a.{b.c}', {brackets: true});
//=> [ 'a', '{b.c}' ]

// also supports nested brackets 
split('a.{b.{c.d}.e}.f', {brackets: true});
//=> [ 'a', '{b.{c.d}.e}', 'f' ]

// support only the specified bracket types
split('«a.b».⟨c.d⟩', {brackets: {'«': '»', '⟨': '⟩'}});
//=> [ '«a.b»', '⟨c.d⟩' ]
split('a.{a.[{b.c}].d}.e', {brackets: {'[': ']'}});
//=> [ 'a', '{a', '[{b.c}]', 'd}', 'e' ]
```


### options.keepEscaping

**Type**: `boolean`

**Default**: `undefined`

Keep backslashes in the result.

**Example**

```js
split('a.b\\.c');
//=> ['a', 'b.c']

split('a.b.\\c', {keepEscaping: true});
//=> ['a', 'b\.c']
```

### options.keepQuotes

**Type**: `boolean`

**Default**: `undefined`

Keep single- or double-quotes in the result.

**Example**

```js
split('a."b.c.d".e');
//=> ['a', 'b.c.d', 'e']

split('a."b.c.d".e', {keepQuotes: true});
//=> ['a', '"b.c.d"', 'e']

split('a.\'b.c.d\'.e', {keepQuotes: true});
//=> ['a', '\'b.c.d\'', 'e']
```

### options.keepDoubleQuotes

**Type**: `boolean`

**Default**: `undefined`

Keep double-quotes in the result.

**Example**

```js
split('a."b.c.d".e');
//=> ['a', 'b.c.d', 'e']

split('a."b.c.d".e', {keepDoubleQuotes: true});
//=> ['a', '"b.c.d"', 'e']
```

### options.keepSingleQuotes

**Type**: `boolean`

**Default**: `undefined`

Keep single-quotes in the result.

**Example**

```js
split('a.\'b.c.d\'.e');
//=> ['a', 'b.c.d', 'e']

split('a.\'b.c.d\'.e', {keepSingleQuotes: true});
//=> ['a', '\'b.c.d\'', 'e']
```

### options.separator

**Type**: `string`

**Default**: `.`

The separator/character to split on. Aliased as `options.sep` for backwards compatibility with versions <4.0.

**Example**

```js
split('a.b,c', {separator: ','});
//=> ['a.b', 'c']

// you can also pass the separator as a string as the last argument
split('a.b,c', ',');
//=> ['a.b', 'c']
```

### options.split

**Type**: `function`

**Default**: the default function returns `true`

Pass a custom function to be called each time a separator is encountered. If the function returns `false` the string will not be split on that separator. 

**Example**

```js
const arr = split('a.b.c', {
  split: function() {
    const prev = this.prev();
    if (prev && prev.value === 'a') {
      return false;
    }
    return true;
  }
});
console.log(arr);
//=> ['a.b', 'c']
```

Note that the [snapdragon-lexer][] instance is exposed as `this` inside the function. See `snapdragon-lexer` for more information and complete API documentation.

## Split function

**Type**: `function`

**Default**: `undefined`

Pass a custom function as the last argument to customize how and when the string should be split. The function will be called each time a separator is encountered. 

To avoid splitting on a specific separator, add a `token.split()` function to the token and return `false`.


**Example**

```js
const arr = split('a.b.c', function(token) {
  const prev = this.prev();
  if (prev && prev.value === 'a') {
    token.split = () => false;
  }
});
console.log(arr);
//=> ['a.b', 'c']
```

Note that the [snapdragon-lexer][] instance is exposed as `this` inside the function. See `snapdragon-lexer` for more information and complete API documentation.
